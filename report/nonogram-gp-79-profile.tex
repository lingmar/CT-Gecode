\begin{tikzpicture}[scale=0.9]
  
  \begin{axis}[
    ybar stacked,
    every axis plot/.append style={fill},
    axis y line*=left,
    ymin=0,
    enlargelimits=0.15,
    ylabel=maximum memory usage (MB),
    legend style={at={(0.1,-0.40)},
      anchor=north,legend columns=-1},
    symbolic x coords={DFA,B,I,CT},
    cycle list name=RdYlGn-9
    ]
    \addplot+[ybar,bar width=10pt,mark=none,xshift=-10pt]
    plot coordinates {
      (DFA, 19068.564453125)
      (B, 397.8515625)
      (I, 398.291015625)
      (CT, 397.8515625)
      
    };
    \addlegendentry{Memory usage}
  \end{axis}

  \begin{axis}[
    ybar stacked,
    every axis plot/.append style={fill},
    axis x line=none,
    axis y line*=right,
    ymin=0,
    ymax=100,
    enlargelimits=0.15,
    legend style={at={(0.8,-0.40)},
      anchor=north,legend columns=-1},
    ylabel={\% time spent},
    symbolic x coords={DFA,B,I,CT},
    xtick=data,
    cycle list name=Reds-4,
    x tick label style={rotate=45,anchor=east},
    ]

    \addplot+[ybar,xshift=10pt]
      plot coordinates {
        (gecode-regular(512), 35)
          (gecode-regular(568), 35)
          (gecode-regular(528), 34)
          (gecode-regular(456), 34)
          (gecode-regular(23637720), 33)
          (gecode-regular(23638472), 33)
          (gecode-regular(23637624), 33)
          (gecode-regular(23635572), 33)
          (gecode-regular(23638880), 33)
          
          }; \label{ gecode-tupleset-mem }
    \addplot+[ybar,xshift=10pt]
      plot coordinates {
        (gecode-regular(512), 34)
          (gecode-regular(568), 30)
          (gecode-regular(528), 31)
          (gecode-regular(456), 33)
          (gecode-regular(23637720), 33)
          (gecode-regular(23638472), 33)
          (gecode-regular(23637624), 33)
          (gecode-regular(23635572), 33)
          (gecode-regular(23638880), 33)
          
          }; \label{ gecode-tupleset-speed }
    \addplot+[ybar,xshift=10pt]
      plot coordinates {
        (gecode-regular(512), 30)
          (gecode-regular(568), 35)
          (gecode-regular(528), 35)
          (gecode-regular(456), 33)
          (gecode-regular(23637720), 33)
          (gecode-regular(23638472), 33)
          (gecode-regular(23637624), 33)
          (gecode-regular(23635572), 33)
          (gecode-regular(23638880), 33)
          
          }; \label{ compact-table }
    
      \legend{  }
      
      \addlegendimage{/pgfplots/refstyle=gecode-tupleset-mem}\addlegendentry{ gecode-tupleset-mem }
        
        \addlegendimage{/pgfplots/refstyle=gecode-tupleset-speed}\addlegendentry{ gecode-tupleset-speed }
        
        \addlegendimage{/pgfplots/refstyle=compact-table}\addlegendentry{ compact-table }
        
        

   \end{axis}

\end{tikzpicture}
