\begin{algorithm}[t]
\begin{algorithmic}[1]
  \PROCEDURE $\CompactTable(s:~\text{store}) : \Tuple{\StatusMessage,\ \text{store}}$
  \IF[executed in a constructor]{the propagator is being posted}
    \STATE $s \leftarrow \InitialiseCT(s,T_0,\mathit{vars}(c))$
    \IF{$s = \emptyset$
}
      \RETURN $\Tuple{\FAIL, \emptyset}$
    \ENDIF
  \ELSE[executed in an advisor]
    \FOREACH{variable~$x \in \Vars$ whose domain has changed since last invocation}
      \STATE \UpdateTable($s,x$)
      \IF{$\CurrTable$.isEmpty()}
        \RETURN $\Tuple{\FAIL,\emptyset}$
      \ENDIF
    \ENDFOREACH
      \IF[executed during propagation]{\CurrTable~has changed since last invocation}
         \STATE $s \leftarrow \FilterDomains(s)$
      \ENDIF
  \ENDIF
  \IF{there is at most one unassigned variable left}
    \RETURN $\Tuple{\SUBSUMED, s}$
  \ELSE 
    \RETURN $\Tuple{\FIX,s}$
  \ENDIF
\end{algorithmic}
\caption{Compact Table Propagator.}
\label{algo:CT}
\end{algorithm}
